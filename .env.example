# =============================================================================
# The DMZ: Archive Gate — Environment Variables
# =============================================================================
# Copy this file to .env:  cp .env.example .env
# Variables marked [SECRET] must be changed in production.
# Variables marked [PUBLIC] are safe to expose in client-side code.
# =============================================================================

# -----------------------------------------------------------------------------
# General
# -----------------------------------------------------------------------------

# Application environment: development | test | production
NODE_ENV=development

# -----------------------------------------------------------------------------
# Database (PostgreSQL)
# -----------------------------------------------------------------------------

# [SECRET] PostgreSQL connection string
DATABASE_URL=postgresql://dmz:dmz_dev@localhost:5432/dmz_dev

# [SECRET] PostgreSQL connection string for test database
DATABASE_TEST_URL=postgresql://dmz:dmz_dev@localhost:5432/dmz_test

# Docker Compose PostgreSQL credentials (used by docker/postgres init scripts)
POSTGRES_USER=dmz
POSTGRES_PASSWORD=dmz_dev

# Connection pool: minimum connections (default: 2)
DATABASE_POOL_MIN=2

# Connection pool: maximum connections (default: 10 dev, 25 production)
DATABASE_POOL_MAX=10

# Connection pool: idle timeout in seconds (default: 10)
# DATABASE_POOL_IDLE_TIMEOUT=10

# Connection pool: connect timeout in seconds (default: 30)
# DATABASE_POOL_CONNECT_TIMEOUT=30

# Require SSL for database connections (default: false dev, true production)
# DATABASE_SSL=false

# -----------------------------------------------------------------------------
# Redis
# -----------------------------------------------------------------------------

# [SECRET] Redis connection string
REDIS_URL=redis://localhost:6379

# -----------------------------------------------------------------------------
# API Server (Fastify)
# -----------------------------------------------------------------------------

# Port the API server listens on (default: 3001)
API_PORT=3001

# Fallback port variable (API_PORT takes precedence when both are set)
PORT=3001

# Host the API server binds to (default: 0.0.0.0)
API_HOST=0.0.0.0

# API semantic version used in OpenAPI docs (default: 0.0.0)
API_VERSION=0.0.0

# Enable Swagger UI endpoint at /docs (default: true in dev/test, false in production)
ENABLE_SWAGGER=true

# Comma-separated list of allowed CORS origins
CORS_ORIGINS=http://localhost:5173

# Structured logging level: fatal | error | warn | info | debug | trace | silent
LOG_LEVEL=debug

# -----------------------------------------------------------------------------
# Authentication
# -----------------------------------------------------------------------------

# [SECRET] JWT signing secret — MUST be changed in production
JWT_SECRET=dev-secret-change-in-production

# JWT token expiry duration (e.g. 7d, 24h, 3600s)
JWT_EXPIRES_IN=7d

# -----------------------------------------------------------------------------
# Frontend (SvelteKit)
# -----------------------------------------------------------------------------

# Port the SvelteKit dev server listens on (used by dev orchestration)
WEB_PORT=5173

# [PUBLIC] Base URL for the API (relative in dev, absolute in production)
PUBLIC_API_BASE_URL=/api/v1

# [PUBLIC] Environment identifier shown in UI (development | test | production)
PUBLIC_ENVIRONMENT=development

# Vite proxy target for API requests during development
VITE_API_URL=http://localhost:3001
