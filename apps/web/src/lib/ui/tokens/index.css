:root {
  /* ========================================
     FONTS
     ======================================== */
  --font-terminal:
    'JetBrains Mono', 'Fira Code', 'IBM Plex Mono', 'Cascadia Code', 'Source Code Pro', 'Consolas',
    'Liberation Mono', monospace;
  --font-document: 'IBM Plex Sans', 'Inter', 'Segoe UI', system-ui, sans-serif;
  --font-admin: 'Inter', 'Segoe UI', system-ui, -apple-system, sans-serif;
  --font-ui: var(--font-terminal);

  /* ========================================
     COLOR - GAME: CORE SURFACES
     ======================================== */
  --color-bg-primary: #0a0e14;
  --color-bg-secondary: #141a22;
  --color-bg-tertiary: #1e2832;
  --color-bg-hover: #253040;
  --color-bg: var(--color-bg-primary);
  --color-surface: var(--color-bg-secondary);

  /* ========================================
     COLOR - GAME: PHOSPHOR TERMINAL
     ======================================== */
  --color-phosphor-green: #33ff33;
  --color-phosphor-green-dim: #88aa88;
  --color-phosphor-green-dark: #334433;
  --color-amber: #ffb000;
  --color-amber-dim: #aa7700;
  --color-document-white: #e0e0e0;
  --color-document-muted: #b0b0b0;

  /* Text colors */
  --color-text: var(--color-phosphor-green);
  --color-text-muted: var(--color-phosphor-green-dim);
  --color-text-document: var(--color-document-white);

  /* ========================================
     COLOR - GAME: SEMANTIC STATUS
     ======================================== */
  --color-safe: #33cc66;
  --color-warning: #ffcc00;
  --color-danger: #ff5555;
  --color-info: #3399ff;
  --color-critical: #ff3333;
  --color-flagged: #ff9900;
  --color-archived: #8a8a8a;

  /* ========================================
     COLOR - GAME: THREAT TIERS
     ======================================== */
  --color-threat-1: #3366ff;
  --color-threat-2: #33cc66;
  --color-threat-3: #ffcc00;
  --color-threat-4: #ff6600;
  --color-threat-5: #cc0000;

  /* ========================================
     COLOR - GAME: FACTION
     ======================================== */
  --color-faction-sovereign: #4488cc;
  --color-faction-nexion: #cc8844;
  --color-faction-librarians: #44aa88;
  --color-faction-hacktivist: #aa44cc;
  --color-faction-criminal: #cc4444;

  /* ========================================
     COLOR - UI UTILITIES
     ======================================== */
  --color-border: var(--color-phosphor-green-dark);
  --color-accent: var(--color-phosphor-green);
  --color-muted: var(--color-phosphor-green-dim);
  --color-backdrop: rgba(0, 0, 0, 0.7);

  /* ========================================
     COLOR - ADMIN PALETTE
     ======================================== */
  --admin-bg-primary: #1a1a2e;
  --admin-bg-secondary: #16213e;
  --admin-bg-tertiary: #1f2b47;
  --admin-text-primary: #e0e0e0;
  --admin-text-secondary: #a0a0b0;
  --admin-accent: #4d9eff;
  --admin-success: #2ea96e;
  --admin-warning: #ffd44d;
  --admin-danger: #e85d6a;
  --admin-border: #2a2a4a;

  /* ========================================
     TYPE SCALE - GAME
     ======================================== */
  --text-xs: 0.75rem;
  --text-sm: 0.875rem;
  --text-base: 1rem;
  --text-md: 1.125rem;
  --text-lg: 1.25rem;
  --text-xl: 1.5rem;
  --text-2xl: 2rem;
  --text-3xl: 2.5rem;

  /* ========================================
     TYPE SCALE - ADMIN
     ======================================== */
  --admin-text-xs: 0.75rem;
  --admin-text-sm: 0.875rem;
  --admin-text-base: 1rem;
  --admin-text-lg: 1.125rem;
  --admin-text-xl: 1.375rem;
  --admin-text-2xl: 1.75rem;
  --admin-text-metric: 2rem;

  /* ========================================
     CRT EFFECT INTENSITY - GAME
     ======================================== */
  --scanline-opacity: 0.05;
  --glow-intensity: 1;
  --noise-opacity: 0.03;
  --vignette-opacity: 0.3;

  /* ========================================
       SPACING
      ======================================== */
  --space-0: 0;
  --space-1: 0.25rem;
  --space-2: 0.5rem;
  --space-3: 0.75rem;
  --space-4: 1rem;
  --space-5: 1.5rem;
  --space-6: 2rem;
  --space-8: 3rem;

  /* ========================================
      BREAKPOINTS
      ======================================== */
  --bp-mobile-sm: 320px;
  --bp-mobile: 600px;
  --bp-tablet: 768px;
  --bp-desktop: 1024px;
  --bp-desktop-lg: 1440px;
}

/* ========================================
   THEME: GREEN (DEFAULT - GAME)
   ======================================== */
[data-theme='green'] {
  --color-bg: #0a0e14;
  --color-surface: #141a22;
  --color-text: #33ff33;
  --color-text-muted: #88aa88;
  --color-border: #334433;
  --color-accent: #33ff33;
  --color-muted: #88aa88;
}

/* ========================================
   THEME: AMBER (GAME VARIANT)
   ======================================== */
[data-theme='amber'] {
  --color-bg: #0a0e14;
  --color-surface: #141a22;
  --color-text: #ffb000;
  --color-text-muted: #aa7700;
  --color-border: #4a3a00;
  --color-accent: #ffb000;
  --color-muted: #aa7700;
}

/* ========================================
    THEME: HIGH-CONTRAST (ACCESSIBILITY)
    ======================================== */
[data-theme='high-contrast'] {
  --color-bg: #000000;
  --color-surface: #0a0a0a;
  --color-text: #ffffff;
  --color-text-muted: #cccccc;
  --color-border: #ffffff;
  --color-accent: #ffff00;
  --color-muted: #cccccc;
  --color-backdrop: rgba(0, 0, 0, 0.9);

  /* Disable CRT effects in high-contrast */
  --effect-scanlines: 0;
  --effect-curvature: 0;
  --effect-glow: 0;
  --effect-noise: 0;
  --effect-vignette: 0;
}

/* ========================================
    THEME: ENTERPRISE (ADMIN)
    ======================================== */
[data-theme='enterprise'] {
  --color-bg: var(--admin-bg-primary);
  --color-surface: var(--admin-bg-secondary);
  --color-text: var(--admin-text-primary);
  --color-text-muted: var(--admin-text-secondary);
  --color-border: var(--admin-border);
  --color-accent: var(--admin-accent);
  --color-muted: var(--admin-text-secondary);
  --color-backdrop: rgba(0, 0, 0, 0.6);

  /* Disable CRT effects in enterprise mode */
  --effect-scanlines: 0;
  --effect-curvature: 0;
  --effect-glow: 0;
  --effect-noise: 0;
  --effect-vignette: 0;
}

/* ========================================
   ROUTE GROUP: (GAME) - DEFAULT GREEN
   ======================================== */
[data-surface='game'] {
  --font-ui: var(--font-terminal);
}

/* ========================================
   ROUTE GROUP: (ADMIN) - ENTERPRISE
   ======================================== */
[data-surface='admin'] {
  --font-ui: var(--font-admin);
}

/* ========================================
   ROUTE GROUP: (AUTH) & (PUBLIC)
   ======================================== */
[data-surface='auth'],
[data-surface='public'] {
  --font-ui: var(--font-document);
}

/* ========================================
   CRT EFFECTS - SCANLINES
   ======================================== */
.crt-scanlines::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1000;
  background: repeating-linear-gradient(
    to bottom,
    transparent 0px,
    transparent 1px,
    rgba(0, 0, 0, var(--scanline-opacity, 0.05)) 1px,
    rgba(0, 0, 0, var(--scanline-opacity, 0.05)) 2px
  );
  animation: scanline-drift 8s linear infinite;
}

@keyframes scanline-drift {
  0% {
    background-position: 0 0;
  }
  100% {
    background-position: 0 4px;
  }
}

/* ========================================
   CRT EFFECTS - PHOSPHOR GLOW
   ======================================== */
.crt-glow {
  text-shadow:
    0 0 calc(2px * var(--glow-intensity, 1)) rgba(51, 255, 51, calc(0.4 * var(--glow-intensity, 1))),
    0 0 calc(4px * var(--glow-intensity, 1)) rgba(51, 255, 51, calc(0.2 * var(--glow-intensity, 1))),
    0 0 calc(8px * var(--glow-intensity, 1)) rgba(51, 255, 51, calc(0.1 * var(--glow-intensity, 1)));
}

.crt-glow--amber {
  text-shadow:
    0 0 calc(2px * var(--glow-intensity, 1)) rgba(255, 176, 0, calc(0.4 * var(--glow-intensity, 1))),
    0 0 calc(4px * var(--glow-intensity, 1)) rgba(255, 176, 0, calc(0.2 * var(--glow-intensity, 1))),
    0 0 calc(8px * var(--glow-intensity, 1)) rgba(255, 176, 0, calc(0.1 * var(--glow-intensity, 1)));
}

/* ========================================
   CRT EFFECTS - VIGNETTE
   ======================================== */
.crt-vignette::after {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 999;
  background: radial-gradient(
    ellipse at center,
    transparent 60%,
    rgba(0, 0, 0, var(--vignette-opacity, 0.3)) 100%
  );
}

/* ========================================
   CRT EFFECTS - NOISE
   ======================================== */
.crt-noise::before {
  content: '';
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 1001;
  opacity: var(--noise-opacity, 0.03);
  background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 200 200' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
  background-size: 128px 128px;
  animation: noise-shift 0.5s steps(4) infinite;
}

@keyframes noise-shift {
  0% {
    background-position: 0 0;
  }
  25% {
    background-position: -32px -16px;
  }
  50% {
    background-position: 16px -32px;
  }
  75% {
    background-position: -16px 32px;
  }
  100% {
    background-position: 0 0;
  }
}

/* ========================================
   CRT EFFECTS - FLICKER
   ======================================== */
@keyframes screen-flicker {
  0% {
    opacity: 1;
  }
  5% {
    opacity: 0.85;
  }
  10% {
    opacity: 1;
  }
  15% {
    opacity: 0.9;
  }
  20% {
    opacity: 1;
  }
  100% {
    opacity: 1;
  }
}

.crt-flicker--active {
  animation: screen-flicker 0.4s ease-out 1;
}

/* ========================================
   CRT EFFECTS - CURVATURE
   ======================================== */
.crt-curvature {
  overflow: hidden;
  border-radius: 12px;
}

.crt-curvature > .game-viewport {
  transform: perspective(800px) rotateX(0.5deg);
  border-radius: 20px / 18px;
  box-shadow:
    inset 0 0 60px rgba(0, 0, 0, 0.4),
    inset 0 0 120px rgba(0, 0, 0, 0.2);
}

@media (max-width: 1023px) {
  .crt-curvature > .game-viewport {
    transform: none;
    border-radius: 0;
    box-shadow: none;
  }
}

/* ========================================
   REDUCED MOTION - DISABLE ANIMATIONS
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  .crt-scanlines::after,
  .crt-noise::before {
    animation: none;
  }

  .crt-flicker--active {
    animation: none;
    opacity: 0.9;
    transition: opacity 0.3s ease;
  }

  .crt-curvature > .game-viewport {
    transform: none;
    border-radius: 0;
    box-shadow: none;
  }
}

/* ========================================
   EFFECT TOGGLE: SCANLINES
   ======================================== */
[data-scanlines='off'] .crt-scanlines::after {
  display: none;
}

/* ========================================
   EFFECT TOGGLE: CURVATURE
   ======================================== */
[data-curvature='off'] .crt-curvature > .game-viewport {
  transform: none;
  border-radius: 0;
  box-shadow: none;
}

/* ========================================
   EFFECT TOGGLE: GLOW
   ======================================== */
[data-glow='off'] .crt-glow,
[data-glow='off'] .crt-glow--amber,
[data-high-contrast='on'] .crt-glow,
[data-high-contrast='on'] .crt-glow--amber {
  text-shadow: none;
}

/* ========================================
   EFFECT TOGGLE: NOISE
   ======================================== */
[data-noise='off'] .crt-noise::before {
  display: none;
}

/* ========================================
   EFFECT TOGGLE: VIGNETTE
   ======================================== */
[data-vignette='off'] .crt-vignette::after {
  display: none;
}

/* ========================================
   HIGH-CONTRAST MODE TOGGLE
   ======================================== */
[data-high-contrast='on'] {
  --color-bg: #000000;
  --color-surface: #0a0a0a;
  --color-text: #ffffff;
  --color-text-muted: #cccccc;
  --color-border: #ffffff;
  --color-accent: #ffff00;
  --color-muted: #cccccc;
}

/* ========================================
   RESPONSIVE LAYOUT UTILITIES
   ======================================== */

/* Mobile small (320px+) */
@media (min-width: var(--bp-mobile-sm)) {
  .shell--mobile-sm-only {
    display: block;
  }
  .shell--tablet-only,
  .shell--desktop-only {
    display: none;
  }
}

/* Mobile (600px+) */
@media (min-width: var(--bp-mobile)) {
  .shell--mobile-only {
    display: block;
  }
  .shell--tablet-only,
  .shell--desktop-only {
    display: none;
  }
}

/* Tablet (768px-1023px) */
@media (min-width: var(--bp-tablet)) and (max-width: 1023px) {
  .shell--tablet-only {
    display: block;
  }
  .shell--mobile-only,
  .shell--desktop-only {
    display: none;
  }
}

/* Desktop (1024px+) */
@media (min-width: var(--bp-desktop)) {
  .shell--desktop-only {
    display: block;
  }
  .shell--mobile-only,
  .shell--tablet-only {
    display: none;
  }
}

/* ========================================
   RESPONSIVE GRID LAYOUTS - GAME SHELL
   ======================================== */

/* Desktop: 3-panel grid */
.shell-game {
  display: grid;
  grid-template-columns: 280px 1fr 300px;
  grid-template-rows: 1fr;
  gap: var(--space-4);
  height: 100vh;
  width: 100%;
  padding: var(--space-4);
  box-sizing: border-box;
}

.shell-game__panel--inbox {
  grid-column: 1;
  grid-row: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.shell-game__panel--document {
  grid-column: 2;
  grid-row: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

.shell-game__panel--status {
  grid-column: 3;
  grid-row: 1;
  overflow: hidden;
  display: flex;
  flex-direction: column;
}

/* Tablet: 2-panel with toggleable drawer */
@media (min-width: var(--bp-tablet)) and (max-width: 1023px) {
  .shell-game {
    grid-template-columns: 240px 1fr;
    grid-template-rows: 1fr;
  }

  .shell-game__panel--inbox {
    grid-column: 1;
  }

  .shell-game__panel--document {
    grid-column: 2;
  }

  .shell-game__panel--status {
    display: none;
  }

  .shell-game__panel--status.shell-game__panel--drawer-open {
    display: flex;
    position: fixed;
    right: 0;
    top: 0;
    bottom: 0;
    width: 300px;
    z-index: 100;
    grid-column: auto;
    grid-row: auto;
  }
}

/* Mobile: 1-panel with tabs */
@media (max-width: 767px) {
  .shell-game {
    display: flex;
    flex-direction: column;
    grid-template-columns: 1fr;
    grid-template-rows: 1fr;
    padding: var(--space-2);
  }

  .shell-game__panel--inbox,
  .shell-game__panel--document,
  .shell-game__panel--status {
    display: none;
    grid-column: auto;
    grid-row: auto;
    flex: 1;
    overflow: auto;
  }

  .shell-game__panel--inbox.shell-game__panel--active,
  .shell-game__panel--document.shell-game__panel--active,
  .shell-game__panel--status.shell-game__panel--active {
    display: flex;
  }
}

/* ========================================
   RESPONSIVE GRID LAYOUTS - ADMIN SHELL
   ======================================== */

.shell-admin {
  display: grid;
  grid-template-columns: 240px 1fr;
  grid-template-rows: auto 1fr;
  min-height: 100vh;
  width: 100%;
}

.shell-admin__header {
  grid-column: 1 / -1;
  grid-row: 1;
  display: flex;
  align-items: center;
  justify-content: space-between;
  padding: var(--space-3) var(--space-4);
  border-bottom: var(--border-default);
  background-color: var(--color-surface);
}

.shell-admin__sidebar {
  grid-column: 1;
  grid-row: 2;
  padding: var(--space-4);
  border-right: var(--border-default);
  background-color: var(--color-bg);
  overflow-y: auto;
}

.shell-admin__main {
  grid-column: 2;
  grid-row: 2;
  padding: var(--space-4);
  overflow-y: auto;
}

@media (max-width: 767px) {
  .shell-admin {
    grid-template-columns: 1fr;
  }

  .shell-admin__sidebar {
    display: none;
    position: fixed;
    left: 0;
    top: 0;
    bottom: 0;
    width: 280px;
    z-index: 100;
    grid-column: auto;
    grid-row: auto;
  }

  .shell-admin__sidebar.shell-admin__sidebar--open {
    display: block;
  }

  .shell-admin__main {
    grid-column: 1;
    padding: var(--space-2);
  }
}

/* ========================================
   RESPONSIVE GRID LAYOUTS - AUTH/PUBLIC SHELL
   ======================================== */

.shell-auth {
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  min-height: 100vh;
  width: 100%;
  padding: var(--space-4);
  box-sizing: border-box;
}

.shell-auth__container {
  width: 100%;
  max-width: 420px;
}

@media (min-width: var(--bp-tablet)) {
  .shell-auth__container {
    max-width: 480px;
  }
}

.shell-public {
  display: flex;
  flex-direction: column;
  min-height: 100vh;
  width: 100%;
}

.shell-public__header {
  padding: var(--space-4);
  border-bottom: var(--border-default);
  background-color: var(--color-surface);
}

.shell-public__main {
  flex: 1;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  padding: var(--space-6);
}

.shell-public__container {
  width: 100%;
  max-width: 800px;
}

@media (max-width: 767px) {
  .shell-public__main {
    padding: var(--space-4);
  }
}

/* ========================================
   REDUCED MOTION FOR LAYOUT TRANSITIONS
   ======================================== */
@media (prefers-reduced-motion: reduce) {
  .shell-game,
  .shell-admin,
  .shell-auth,
  .shell-public {
    transition: none;
  }

  .shell-drawer,
  .shell-sidebar {
    transition: none;
  }
}
