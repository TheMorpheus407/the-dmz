{"assignees":[],"author":{"id":"MDQ6VXNlcjIyODUzMjIy","is_bot":false,"login":"TheMorpheus407","name":"The Morpheus Tutorials"},"body":"## Summary\nSet up a Docker Compose configuration for local development that provides PostgreSQL, Redis, and optional containerized app services. The goal is a single-command dev environment startup.\n\n## Requirements\n\n### Docker Compose Services\n\n#### PostgreSQL 16\n- Image: `postgres:16-alpine`\n- Port: 5432\n- Persistent volume for data\n- Init scripts directory for database creation\n- Create databases: `dmz_dev` and `dmz_test`\n- Default credentials via `.env.example`\n- Health check configured\n\n#### Redis 7\n- Image: `redis:7-alpine`\n- Port: 6379\n- Persistence disabled for dev (speed)\n- Health check configured\n\n#### Adminer (optional, dev profile)\n- Image: `adminer:latest`\n- Port: 8080\n- For database inspection during development\n- Only runs with `--profile tools` flag\n\n### Environment Configuration\n- `.env.example` with all required variables:\n  ```env\n  # Database\n  DATABASE_URL=postgresql://dmz:dmz_dev@localhost:5432/dmz_dev\n  DATABASE_TEST_URL=postgresql://dmz:dmz_dev@localhost:5432/dmz_test\n  POSTGRES_USER=dmz\n  POSTGRES_PASSWORD=dmz_dev\n\n  # Redis\n  REDIS_URL=redis://localhost:6379\n\n  # App\n  PORT=3001\n  VITE_API_URL=http://localhost:3001\n  NODE_ENV=development\n  LOG_LEVEL=debug\n  JWT_SECRET=dev-secret-change-in-production\n  ```\n- `.env` added to `.gitignore`\n- Script to copy `.env.example` to `.env` on first setup\n\n### Docker Init Scripts\n- `docker/postgres/init.sql`: Create dev and test databases\n- `docker/postgres/init-extensions.sql`: Enable required extensions (uuid-ossp, pgcrypto)\n\n### Developer Scripts (root package.json)\n- `pnpm services:up` - Start PostgreSQL + Redis\n- `pnpm services:down` - Stop services\n- `pnpm services:reset` - Stop, remove volumes, restart (clean slate)\n\n### .dockerignore\n- Proper ignore file for containerized builds (node_modules, .git, etc.)\n\n## Acceptance Criteria\n- [ ] `docker compose up -d` starts PostgreSQL and Redis\n- [ ] PostgreSQL is accessible at localhost:5432 with configured credentials\n- [ ] Redis is accessible at localhost:6379\n- [ ] `dmz_dev` and `dmz_test` databases are created automatically\n- [ ] PostgreSQL extensions (uuid-ossp, pgcrypto) are enabled\n- [ ] Health checks pass for all services\n- [ ] `.env.example` documents all required variables\n- [ ] `pnpm services:up/down/reset` scripts work correctly\n\n## References\n- MILESTONES.md: M0 \"Dev environment\" deliverable\n- DD-10: Database Schema (PostgreSQL 16+, Redis 7.x)\n- DD-14 Section 12: Environment Strategy\n\n## Dependencies\n- M0-01: Initialize pnpm monorepo workspace\n\n---","comments":[],"createdAt":"2026-02-05T15:21:51Z","labels":[{"id":"LA_kwDOQ_FFzs8AAAACXIw6vQ","name":"M0: Bootstrap","description":"Milestone 0: Project Bootstrap","color":"1D76DB"},{"id":"LA_kwDOQ_FFzs8AAAACXIw7rw","name":"infrastructure","description":"CI/CD, Docker, DevOps","color":"0E8A16"}],"number":6,"title":"M0-06: Configure Docker Compose development environment","updatedAt":"2026-02-05T15:21:51Z","url":"https://github.com/TheMorpheus407/the-dmz/issues/6"}
