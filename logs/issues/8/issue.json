{"assignees":[],"author":{"id":"MDQ6VXNlcjIyODUzMjIy","is_bot":false,"login":"TheMorpheus407","name":"The Morpheus Tutorials"},"body":"## Summary\nSet up GitHub Actions workflows for continuous integration: build, lint, typecheck, unit tests, and container builds. This establishes the quality gate that all PRs must pass.\n\n## Requirements\n\n### CI Workflow (`.github/workflows/ci.yml`)\nTriggered on: push to `master`, pull requests to `master`\n\n#### Jobs:\n1. **lint-and-typecheck**\n   - pnpm install (with cache)\n   - Run ESLint across all packages\n   - Run TypeScript typecheck across all packages\n   - Run Prettier check (format verification)\n\n2. **unit-tests**\n   - pnpm install (with cache)\n   - Run Vitest across all packages\n   - Upload coverage reports as artifacts\n   - Fail if coverage drops below threshold\n\n3. **build**\n   - pnpm install (with cache)\n   - Build shared packages first\n   - Build frontend (SvelteKit)\n   - Build backend (TypeScript compilation)\n   - Verify build artifacts exist\n\n4. **integration-tests** (future, placeholder)\n   - PostgreSQL service container\n   - Redis service container\n   - Run database migrations\n   - Run integration test suite\n   - (Initially just verifies DB connection and migration)\n\n### Workflow Configuration\n- Node.js 22 LTS\n- pnpm 9.x (corepack enable)\n- Dependency caching via `actions/setup-node` with pnpm cache\n- Turborepo remote cache consideration (optional)\n- Concurrency: cancel in-progress runs for same branch\n- Matrix strategy for Node versions (22.x only initially)\n\n### Branch Protection Rules (document, apply manually)\n- Require CI to pass before merge\n- Require at least 1 review\n- No force push to master\n- Require linear history\n\n### Container Build Workflow (`.github/workflows/docker.yml`)\nTriggered on: push to `master` (not PRs)\n\n- Build Docker images for api and web\n- Tag with commit SHA and `latest`\n- Push to GitHub Container Registry (ghcr.io)\n- (Initially just builds, no push until registry is configured)\n\n### Dockerfile Stubs\n- `apps/api/Dockerfile` - Multi-stage Node.js build\n- `apps/web/Dockerfile` - Multi-stage Node.js build with adapter-node\n\n## Acceptance Criteria\n- [ ] CI workflow runs on push to master and on PRs\n- [ ] Lint, typecheck, and test jobs run in parallel\n- [ ] Build job succeeds with valid artifacts\n- [ ] pnpm dependencies are cached between runs\n- [ ] CI fails on lint errors, type errors, or test failures\n- [ ] Dockerfiles build successfully locally\n- [ ] Concurrency cancels in-progress runs for same branch\n- [ ] CI completes in < 5 minutes for clean builds\n\n## References\n- MILESTONES.md: M0 \"CI/CD pipeline\" deliverable\n- DD-14 Section 12.2: CI/CD Pipeline\n- DD-14 Section 34.4: CI/CD and Supply Chain Security\n- Cross-cutting: Security scanning in CI\n\n## Dependencies\n- M0-01: Initialize pnpm monorepo workspace\n- M0-10: ESLint configuration\n- M0-13: Vitest testing infrastructure\n\n---","comments":[],"createdAt":"2026-02-05T15:22:25Z","labels":[{"id":"LA_kwDOQ_FFzs8AAAACXIw6vQ","name":"M0: Bootstrap","description":"Milestone 0: Project Bootstrap","color":"1D76DB"},{"id":"LA_kwDOQ_FFzs8AAAACXIw7rw","name":"infrastructure","description":"CI/CD, Docker, DevOps","color":"0E8A16"}],"number":8,"title":"M0-08: Configure GitHub Actions CI/CD pipeline","updatedAt":"2026-02-05T15:22:25Z","url":"https://github.com/TheMorpheus407/the-dmz/issues/8"}
